import{useRef as n,useState as e,useEffect as l}from"react";import{Conversation as r}from"@elevenlabs/client";export{postOverallFeedback}from"@elevenlabs/client";function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var l=arguments[e];for(var r in l)({}).hasOwnProperty.call(l,r)&&(n[r]=l[r])}return n},u.apply(null,arguments)}const o=["micMuted","volume","serverLocation"];function t(n="us"){switch(n){case"eu-residency":case"in-residency":case"us":case"global":return n;default:return console.warn(`[ConversationalAI] Invalid server-location: ${n}. Defaulting to "us"`),"us"}}function i(n){return{us:"wss://api.elevenlabs.io","eu-residency":"wss://api.eu.residency.elevenlabs.io","in-residency":"wss://api.in.residency.elevenlabs.io",global:"wss://api.elevenlabs.io"}[n]}function a(a={}){const{micMuted:s,volume:d,serverLocation:c}=a,v=function(n,e){if(null==n)return{};var l={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(-1!==e.indexOf(r))continue;l[r]=n[r]}return l}(a,o),g=n(null),p=n(null),[C,m]=e("disconnected"),[b,y]=e(!1),[f,S]=e("listening");return l(()=>{var n;void 0!==s&&(null==g||null==(n=g.current)||n.setMicMuted(s))},[s]),l(()=>{var n;void 0!==d&&(null==g||null==(n=g.current)||n.setVolume({volume:d}))},[d]),l(()=>()=>{var n;null==(n=g.current)||n.endSession()},[]),{startSession:async n=>{var e;if(null!=(e=g.current)&&e.isOpen())return g.current.getId();if(p.current)return(await p.current).getId();try{var l,o,a,C,b,f,M,h,F,k;const e=i(t((null==n?void 0:n.serverLocation)||c));return p.current=r.startSession(u({},null!=v?v:{},null!=n?n:{},{origin:e,overrides:u({},null!=(l=null==v?void 0:v.overrides)?l:{},null!=(o=null==n?void 0:n.overrides)?o:{},{client:u({},null!=(a=null==v||null==(C=v.overrides)?void 0:C.client)?a:{},null!=(b=null==n||null==(f=n.overrides)?void 0:f.client)?b:{},{source:(null==n||null==(M=n.overrides)||null==(M=M.client)?void 0:M.source)||(null==v||null==(h=v.overrides)||null==(h=h.client)?void 0:h.source)||"react_sdk",version:(null==n||null==(F=n.overrides)||null==(F=F.client)?void 0:F.version)||(null==v||null==(k=v.overrides)||null==(k=k.client)?void 0:k.version)||"0.5.0"})}),onConnect:(null==n?void 0:n.onConnect)||(null==v?void 0:v.onConnect),onDisconnect:(null==n?void 0:n.onDisconnect)||(null==v?void 0:v.onDisconnect),onError:(null==n?void 0:n.onError)||(null==v?void 0:v.onError),onMessage:(null==n?void 0:n.onMessage)||(null==v?void 0:v.onMessage),onAudio:(null==n?void 0:n.onAudio)||(null==v?void 0:v.onAudio),onDebug:(null==n?void 0:n.onDebug)||(null==v?void 0:v.onDebug),onUnhandledClientToolCall:(null==n?void 0:n.onUnhandledClientToolCall)||(null==v?void 0:v.onUnhandledClientToolCall),onVadScore:(null==n?void 0:n.onVadScore)||(null==v?void 0:v.onVadScore),onModeChange:({mode:e})=>{var l;S(e),null==(l=(null==n?void 0:n.onModeChange)||(null==v?void 0:v.onModeChange))||l({mode:e})},onStatusChange:({status:e})=>{var l;m(e),null==(l=(null==n?void 0:n.onStatusChange)||(null==v?void 0:v.onStatusChange))||l({status:e})},onCanSendFeedbackChange:({canSendFeedback:e})=>{var l;y(e),null==(l=(null==n?void 0:n.onCanSendFeedbackChange)||(null==v?void 0:v.onCanSendFeedbackChange))||l({canSendFeedback:e})}})),g.current=await p.current,void 0!==s&&g.current.setMicMuted(s),void 0!==d&&g.current.setVolume({volume:d}),g.current.getId()}finally{p.current=null}},endSession:async()=>{const n=g.current;g.current=null,await(null==n?void 0:n.endSession())},setVolume:({volume:n})=>{var e;null==(e=g.current)||e.setVolume({volume:n})},getInputByteFrequencyData:()=>{var n;return null==(n=g.current)?void 0:n.getInputByteFrequencyData()},getOutputByteFrequencyData:()=>{var n;return null==(n=g.current)?void 0:n.getOutputByteFrequencyData()},getInputVolume:()=>{var n,e;return null!=(n=null==(e=g.current)?void 0:e.getInputVolume())?n:0},getOutputVolume:()=>{var n,e;return null!=(n=null==(e=g.current)?void 0:e.getOutputVolume())?n:0},sendFeedback:n=>{var e;null==(e=g.current)||e.sendFeedback(n)},getId:()=>{var n;return null==(n=g.current)?void 0:n.getId()},sendContextualUpdate:n=>{var e;null==(e=g.current)||e.sendContextualUpdate(n)},sendUserMessage:n=>{var e;null==(e=g.current)||e.sendUserMessage(n)},sendUserActivity:()=>{var n;null==(n=g.current)||n.sendUserActivity()},sendMCPToolApprovalResult:(n,e)=>{var l;null==(l=g.current)||l.sendMCPToolApprovalResult(n,e)},status:C,canSendFeedback:b,micMuted:s,isSpeaking:"speaking"===f}}export{i as getOriginForLocation,t as parseLocation,a as useConversation};
//# sourceMappingURL=lib.modern.js.map
