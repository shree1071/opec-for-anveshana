!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("@elevenlabs/client")):"function"==typeof define&&define.amd?define(["exports","react","@elevenlabs/client"],e):e((n||self).react={},n.react,n.client)}(this,function(n,e,r){function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var u in r)({}).hasOwnProperty.call(r,u)&&(n[u]=r[u])}return n},u.apply(null,arguments)}var l=["micMuted","volume","serverLocation"];function t(n){switch(void 0===n&&(n="us"),n){case"eu-residency":case"in-residency":case"us":case"global":return n;default:return console.warn("[ConversationalAI] Invalid server-location: "+n+'. Defaulting to "us"'),"us"}}function o(n){return{us:"wss://api.elevenlabs.io","eu-residency":"wss://api.eu.residency.elevenlabs.io","in-residency":"wss://api.in.residency.elevenlabs.io",global:"wss://api.elevenlabs.io"}[n]}Object.defineProperty(n,"postOverallFeedback",{enumerable:!0,get:function(){return r.postOverallFeedback}}),n.getOriginForLocation=o,n.parseLocation=t,n.useConversation=function(n){void 0===n&&(n={});var i=n.micMuted,c=n.volume,s=n.serverLocation,a=function(n,e){if(null==n)return{};var r={};for(var u in n)if({}.hasOwnProperty.call(n,u)){if(-1!==e.indexOf(u))continue;r[u]=n[u]}return r}(n,l),d=e.useRef(null),v=e.useRef(null),f=e.useState("disconnected"),g=f[0],p=f[1],b=e.useState(!1),h=b[0],m=b[1],C=e.useState("listening"),y=C[0],S=C[1];return e.useEffect(function(){var n;void 0!==i&&(null==d||null==(n=d.current)||n.setMicMuted(i))},[i]),e.useEffect(function(){var n;void 0!==c&&(null==d||null==(n=d.current)||n.setVolume({volume:c}))},[c]),e.useEffect(function(){return function(){var n;null==(n=d.current)||n.endSession()}},[]),{startSession:function(n){try{var e,l,f=function(e){return l?e:function(e,l){try{var f=(D=o(t((null==n?void 0:n.serverLocation)||s)),v.current=r.Conversation.startSession(u({},null!=a?a:{},null!=n?n:{},{origin:D,overrides:u({},null!=(g=null==a?void 0:a.overrides)?g:{},null!=(b=null==n?void 0:n.overrides)?b:{},{client:u({},null!=(h=null==a||null==(C=a.overrides)?void 0:C.client)?h:{},null!=(y=null==n||null==(M=n.overrides)?void 0:M.client)?y:{},{source:(null==n||null==(F=n.overrides)||null==(F=F.client)?void 0:F.source)||(null==a||null==(O=a.overrides)||null==(O=O.client)?void 0:O.source)||"react_sdk",version:(null==n||null==(k=n.overrides)||null==(k=k.client)?void 0:k.version)||(null==a||null==(P=a.overrides)||null==(P=P.client)?void 0:P.version)||"0.5.0"})}),onConnect:(null==n?void 0:n.onConnect)||(null==a?void 0:a.onConnect),onDisconnect:(null==n?void 0:n.onDisconnect)||(null==a?void 0:a.onDisconnect),onError:(null==n?void 0:n.onError)||(null==a?void 0:a.onError),onMessage:(null==n?void 0:n.onMessage)||(null==a?void 0:a.onMessage),onAudio:(null==n?void 0:n.onAudio)||(null==a?void 0:a.onAudio),onDebug:(null==n?void 0:n.onDebug)||(null==a?void 0:a.onDebug),onUnhandledClientToolCall:(null==n?void 0:n.onUnhandledClientToolCall)||(null==a?void 0:a.onUnhandledClientToolCall),onVadScore:(null==n?void 0:n.onVadScore)||(null==a?void 0:a.onVadScore),onModeChange:function(e){var r,u=e.mode;S(u),null==(r=(null==n?void 0:n.onModeChange)||(null==a?void 0:a.onModeChange))||r({mode:u})},onStatusChange:function(e){var r,u=e.status;p(u),null==(r=(null==n?void 0:n.onStatusChange)||(null==a?void 0:a.onStatusChange))||r({status:u})},onCanSendFeedbackChange:function(e){var r,u=e.canSendFeedback;m(u),null==(r=(null==n?void 0:n.onCanSendFeedbackChange)||(null==a?void 0:a.onCanSendFeedbackChange))||r({canSendFeedback:u})}})),Promise.resolve(v.current).then(function(n){return d.current=n,void 0!==i&&d.current.setMicMuted(i),void 0!==c&&d.current.setVolume({volume:c}),d.current.getId()}))}catch(n){return l(!0,n)}var g,b,h,C,y,M,F,O,k,P,D;return f&&f.then?f.then(l.bind(null,!1),l.bind(null,!0)):l(!1,f)}(0,function(n,e){if(v.current=null,n)throw e;return e})};if(null!=(e=d.current)&&e.isOpen())return Promise.resolve(d.current.getId());var g=function(){if(v.current)return Promise.resolve(v.current).then(function(n){var e=n.getId();return l=1,e})}();return Promise.resolve(g&&g.then?g.then(f):f(g))}catch(n){return Promise.reject(n)}},endSession:function(){try{var n=d.current;return d.current=null,Promise.resolve(null==n?void 0:n.endSession()).then(function(){})}catch(n){return Promise.reject(n)}},setVolume:function(n){var e;null==(e=d.current)||e.setVolume({volume:n.volume})},getInputByteFrequencyData:function(){var n;return null==(n=d.current)?void 0:n.getInputByteFrequencyData()},getOutputByteFrequencyData:function(){var n;return null==(n=d.current)?void 0:n.getOutputByteFrequencyData()},getInputVolume:function(){var n,e;return null!=(n=null==(e=d.current)?void 0:e.getInputVolume())?n:0},getOutputVolume:function(){var n,e;return null!=(n=null==(e=d.current)?void 0:e.getOutputVolume())?n:0},sendFeedback:function(n){var e;null==(e=d.current)||e.sendFeedback(n)},getId:function(){var n;return null==(n=d.current)?void 0:n.getId()},sendContextualUpdate:function(n){var e;null==(e=d.current)||e.sendContextualUpdate(n)},sendUserMessage:function(n){var e;null==(e=d.current)||e.sendUserMessage(n)},sendUserActivity:function(){var n;null==(n=d.current)||n.sendUserActivity()},sendMCPToolApprovalResult:function(n,e){var r;null==(r=d.current)||r.sendMCPToolApprovalResult(n,e)},status:g,canSendFeedback:h,micMuted:i,isSpeaking:"speaking"===y}}});
//# sourceMappingURL=lib.umd.js.map
