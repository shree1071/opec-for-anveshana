import{useRef as n,useState as e,useEffect as l}from"react";import{Conversation as r}from"@elevenlabs/client";export{postOverallFeedback}from"@elevenlabs/client";function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var l=arguments[e];for(var r in l)({}).hasOwnProperty.call(l,r)&&(n[r]=l[r])}return n},u.apply(null,arguments)}var o=["micMuted","volume","serverLocation"];function t(n){switch(void 0===n&&(n="us"),n){case"eu-residency":case"in-residency":case"us":case"global":return n;default:return console.warn("[ConversationalAI] Invalid server-location: "+n+'. Defaulting to "us"'),"us"}}function i(n){return{us:"wss://api.elevenlabs.io","eu-residency":"wss://api.eu.residency.elevenlabs.io","in-residency":"wss://api.in.residency.elevenlabs.io",global:"wss://api.elevenlabs.io"}[n]}function c(c){void 0===c&&(c={});var s=c.micMuted,a=c.volume,d=c.serverLocation,v=function(n,e){if(null==n)return{};var l={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(-1!==e.indexOf(r))continue;l[r]=n[r]}return l}(c,o),f=n(null),g=n(null),m=e("disconnected"),p=m[0],h=m[1],C=e(!1),b=C[0],y=C[1],S=e("listening"),M=S[0],F=S[1];return l(function(){var n;void 0!==s&&(null==f||null==(n=f.current)||n.setMicMuted(s))},[s]),l(function(){var n;void 0!==a&&(null==f||null==(n=f.current)||n.setVolume({volume:a}))},[a]),l(function(){return function(){var n;null==(n=f.current)||n.endSession()}},[]),{startSession:function(n){try{var e,l,o=function(e){return l?e:function(e,l){try{var o=(O=i(t((null==n?void 0:n.serverLocation)||d)),g.current=r.startSession(u({},null!=v?v:{},null!=n?n:{},{origin:O,overrides:u({},null!=(c=null==v?void 0:v.overrides)?c:{},null!=(m=null==n?void 0:n.overrides)?m:{},{client:u({},null!=(p=null==v||null==(C=v.overrides)?void 0:C.client)?p:{},null!=(b=null==n||null==(S=n.overrides)?void 0:S.client)?b:{},{source:(null==n||null==(M=n.overrides)||null==(M=M.client)?void 0:M.source)||(null==v||null==(k=v.overrides)||null==(k=k.client)?void 0:k.source)||"react_sdk",version:(null==n||null==(D=n.overrides)||null==(D=D.client)?void 0:D.version)||(null==v||null==(I=v.overrides)||null==(I=I.client)?void 0:I.version)||"0.5.0"})}),onConnect:(null==n?void 0:n.onConnect)||(null==v?void 0:v.onConnect),onDisconnect:(null==n?void 0:n.onDisconnect)||(null==v?void 0:v.onDisconnect),onError:(null==n?void 0:n.onError)||(null==v?void 0:v.onError),onMessage:(null==n?void 0:n.onMessage)||(null==v?void 0:v.onMessage),onAudio:(null==n?void 0:n.onAudio)||(null==v?void 0:v.onAudio),onDebug:(null==n?void 0:n.onDebug)||(null==v?void 0:v.onDebug),onUnhandledClientToolCall:(null==n?void 0:n.onUnhandledClientToolCall)||(null==v?void 0:v.onUnhandledClientToolCall),onVadScore:(null==n?void 0:n.onVadScore)||(null==v?void 0:v.onVadScore),onModeChange:function(e){var l,r=e.mode;F(r),null==(l=(null==n?void 0:n.onModeChange)||(null==v?void 0:v.onModeChange))||l({mode:r})},onStatusChange:function(e){var l,r=e.status;h(r),null==(l=(null==n?void 0:n.onStatusChange)||(null==v?void 0:v.onStatusChange))||l({status:r})},onCanSendFeedbackChange:function(e){var l,r=e.canSendFeedback;y(r),null==(l=(null==n?void 0:n.onCanSendFeedbackChange)||(null==v?void 0:v.onCanSendFeedbackChange))||l({canSendFeedback:r})}})),Promise.resolve(g.current).then(function(n){return f.current=n,void 0!==s&&f.current.setMicMuted(s),void 0!==a&&f.current.setVolume({volume:a}),f.current.getId()}))}catch(n){return l(!0,n)}var c,m,p,C,b,S,M,k,D,I,O;return o&&o.then?o.then(l.bind(null,!1),l.bind(null,!0)):l(!1,o)}(0,function(n,e){if(g.current=null,n)throw e;return e})};if(null!=(e=f.current)&&e.isOpen())return Promise.resolve(f.current.getId());var c=function(){if(g.current)return Promise.resolve(g.current).then(function(n){var e=n.getId();return l=1,e})}();return Promise.resolve(c&&c.then?c.then(o):o(c))}catch(n){return Promise.reject(n)}},endSession:function(){try{var n=f.current;return f.current=null,Promise.resolve(null==n?void 0:n.endSession()).then(function(){})}catch(n){return Promise.reject(n)}},setVolume:function(n){var e;null==(e=f.current)||e.setVolume({volume:n.volume})},getInputByteFrequencyData:function(){var n;return null==(n=f.current)?void 0:n.getInputByteFrequencyData()},getOutputByteFrequencyData:function(){var n;return null==(n=f.current)?void 0:n.getOutputByteFrequencyData()},getInputVolume:function(){var n,e;return null!=(n=null==(e=f.current)?void 0:e.getInputVolume())?n:0},getOutputVolume:function(){var n,e;return null!=(n=null==(e=f.current)?void 0:e.getOutputVolume())?n:0},sendFeedback:function(n){var e;null==(e=f.current)||e.sendFeedback(n)},getId:function(){var n;return null==(n=f.current)?void 0:n.getId()},sendContextualUpdate:function(n){var e;null==(e=f.current)||e.sendContextualUpdate(n)},sendUserMessage:function(n){var e;null==(e=f.current)||e.sendUserMessage(n)},sendUserActivity:function(){var n;null==(n=f.current)||n.sendUserActivity()},sendMCPToolApprovalResult:function(n,e){var l;null==(l=f.current)||l.sendMCPToolApprovalResult(n,e)},status:p,canSendFeedback:b,micMuted:s,isSpeaking:"speaking"===M}}export{i as getOriginForLocation,t as parseLocation,c as useConversation};
//# sourceMappingURL=lib.module.js.map
